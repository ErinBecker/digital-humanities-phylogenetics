install.packages("ggplot2", lib='/Library/Frameworks/R.framework/Versions/3.2/Resources/library')
Q39_sections = read.csv("Q000039_sections.csv", stringsAsFactors = FALSE)
getwd()
setwd("../data/")
Q39_sections = read.csv("Q000039_sections.csv", stringsAsFactors = FALSE)
setwd("composite_texts/")
Q39_sections = read.csv("Q000039_sections.csv", stringsAsFactors = FALSE)
ob_lists_wood_w_id_text = read.csv("../ob_lists_wood_w_id_text.csv")
ob_lists_wood_w_id_text$X = NULL
doc_list = unique(ob_lists_wood_w_id_text$id_text)
section_names = colnames(Q39_sections)
section_matrix = data.frame(sapply(doc_list, function(x) x = logical(length(section_names))), row.names = section_names)
colnames(section_matrix) = doc_list
doc_list = as.character(doc_list)
for (j in unique(doc_list)) {
entries = as.character(ob_lists_wood_w_id_text[which(ob_lists_wood_w_id_text$id_text == j),]$entry)
for (i in 1:ncol(Q39_sections)) {
presence = sum(Q39_sections[,i] %in% tolower(entries))
section_matrix[i, j] = presence
}
section_matrix
}
section_matrix$section_name = row.names(section_matrix)
melted_df = melt(section_matrix)
head(melted_df)
View(section_matrix)
for (i in 1:nrow(melted_df)) {
if(melted_df$value[i] > 0) melted_df$value[i] = 1
}
melted_df = melt(section_matrix)
head(melted_df)
for (i in 1:nrow(melted_df)) {
if(melted_df$value[i] > 0) melted_df$value[i] = 1
}
library(reshape)
melted_df = melt(section_matrix)
head(melted_df)
for (i in 1:nrow(melted_df)) {
if(melted_df$value[i] > 0) melted_df$value[i] = 1
}
library(ggplot2)
ggplot(data = melted_df, aes(y = variable, x = section_name)) +
geom_tile(aes(fill = value)) +
theme(axis.text.x = element_text(angle = 90, hjust = 1, size = 5))
View(section_matrix)
rowSums(section_matrix)
section_matrix$section_name = NULL
rowSums(section_matrix)
View(rowSums(section_matrix))
View(section_matrix)
doc_list = unique(ob_lists_wood_w_id_text$id_text)
section_names = colnames(Q39_sections)
section_matrix = data.frame(sapply(doc_list, function(x) x = logical(length(section_names))), row.names = section_names)
colnames(section_matrix) = doc_list
doc_list = as.character(doc_list)
for (j in unique(doc_list)) {
entries = as.character(ob_lists_wood_w_id_text[which(ob_lists_wood_w_id_text$id_text == j),]$entry)
for (i in 1:ncol(Q39_sections)) {
presence = sum(Q39_sections[,i] %in% tolower(entries))
if (presence > 0) presence = 1
section_matrix[i, j] = presence
}
section_matrix
}
rowSums(section_matrix)
View(Q39_sections)
View(section_matrix)
